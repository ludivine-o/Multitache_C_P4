/*
 * display.c
 *
 *  Created on: Apr 15, 2020
 *      Author: ludivineo
 */


#include"fifo.h"


void SetLedMatrix(void) {
	for (int row = 0; row < 7; row++) {
		int col = 0;
		while (col < 7) {
			if (actual_matrix[row][col].RValue == matrix[row][col].RValue //led est deja de la bonne couleur
			&& actual_matrix[row][col].GValue == matrix[row][col].GValue
					&& actual_matrix[row][col].BValue
							== matrix[row][col].BValue) {
			} else {
				setLedColor((row + 1), (col + 1), matrix[row][col].RValue,
						matrix[row][col].GValue, matrix[row][col].BValue);
				actual_matrix[row][col] = matrix[row][col];
			}
			col++;
		}
	}
}


void *display(void*arg) {
	printf("display():entrÃ©e dans le thread display \n");
	struct Element request;
	int receive_status;
	SetLedMatrix();
	while (1) {
		receive_status = ReceiveMessage(LIST_DISPLAY, &request, 1);
		// traite le msg recu de l'app
		if (receive_status == 1) {
			printf("display(): request \n");
//			matrix_to_nbr(request_number, Red, Black);
//			SetLedMatrix();
			sleep(2);
		}
	}
	pthread_exit(NULL);
}
